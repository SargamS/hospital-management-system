{% extends "base.html" %}
{% block content %}
<div class="grid lg:grid-cols-3 gap-6">
  <div class="bg-black/90 text-white rounded-2xl p-6 shadow">
    <h3 class="text-sm text-slate-300">Visitors / Stats</h3>
    <div class="mt-6 text-4xl font-bold"> {{ counts.patients }} </div>
    <p class="text-xs text-slate-400 mt-2">Total registered patients</p>
  </div>

  <div class="bg-white rounded-2xl p-6 shadow">
    <h3 class="text-sm text-slate-600">Doctors Available</h3>
    <div class="mt-6 text-3xl font-semibold text-green-600">{{ counts.doctors }}</div>
    <p class="text-xs text-slate-400 mt-2">Active doctors</p>
  </div>

  <div class="bg-white rounded-2xl p-6 shadow">
    <h3 class="text-sm text-slate-600">Medicine Types</h3>
    <div class="mt-6 text-3xl font-semibold text-purple-600">{{ counts.medicines }}</div>
    <p class="text-xs text-slate-400 mt-2">Different medicines in stock</p>
  </div>
</div>

<div class="grid lg:grid-cols-2 gap-6 mt-6">
  <div class="bg-white rounded-2xl p-6 shadow">
    <h3 class="text-slate-700">Monthly Revenue</h3>
    <div class="mt-4">
      <canvas id="revenueChart" height="120"></canvas>
    </div>
    <div class="mt-4 text-lg font-semibold">Total Revenue: ${{ '{:.2f}'.format(total_revenue) }}</div>
  </div>

  <div class="bg-white rounded-2xl p-6 shadow">
    <h3 class="text-slate-700">Medicine Stock Overview</h3>
    <canvas id="stockChart" height="120"></canvas>
  </div>
</div>

<script>
const medLabels = {{ med_labels|safe }};
const medValues = {{ med_values|safe }};

new Chart(document.getElementById('stockChart'), {
  type: 'doughnut',
  data: {
    labels: medLabels,
    datasets: [{ data: medValues, backgroundColor: ['#34D399','#60A5FA','#F472B6','#FBBF24','#A78BFA','#F87171'] }]
  },
  options: { plugins: { legend: { position: 'bottom' } } }
});

new Chart(document.getElementById('revenueChart'), {
  type: 'bar',
  data: {
    labels: ['Jan','Feb','Mar','Apr','May','Jun'],
    datasets: [{ label: 'Revenue', data: [1200,1800,1500,2100,2400,3000], backgroundColor: '#34D399' }]
  },
  options: { scales: { y: { beginAtZero: true } } }
});
</script>
{% endblock %}
